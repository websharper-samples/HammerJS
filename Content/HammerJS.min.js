function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw;a=self;b=a.Sample=a.Sample||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.HtmlModule=f.HtmlModule||{};h=g.attr=g.attr||{};i=d.Operators=d.Operators||{};j=a.EventTarget;k=a.Recognizer;l=f.Doc=f.Doc||{};m=f.AttrProxy=f.AttrProxy||{};n=f.Elt=f.Elt||{};o=d.JavaScript=d.JavaScript||{};p=o.Pervasives=o.Pervasives||{};q=f.Client=f.Client||{};r=q.Templates=q.Templates||{};s=f.DomUtility=f.DomUtility||{};t=f.Attrs=f.Attrs||{};u=f.DocElemNode=f.DocElemNode||{};v=f.Updates=f.Updates||{};w=f.View=f.View||{};x=a.Node;y=o.JS=o.JS||{};z=d.Collections=d.Collections||{};A=z.Dictionary=z.Dictionary||{};B=d.Unchecked=d.Unchecked||{};C=f.Array=f.Array||{};D=q.Attrs=q.Attrs||{};E=D.Dyn=D.Dyn||{};F=f.Snap=f.Snap||{};G=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};H=d.Arrays=d.Arrays||{};I=z.HashSet=z.HashSet||{};J=d.Seq=d.Seq||{};K=a.WindowOrWorkerGlobalScope;L=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};M=f.Docs=f.Docs||{};N=a.CharacterData;O=d.List=d.List||{};P=O.T=O.T||{};Q=a.Object;R=z.DictionaryUtil=z.DictionaryUtil||{};S=r.Prepare=r.Prepare||{};T=d.Slice=d.Slice||{};U=d.Enumerator=d.Enumerator||{};V=z.KeyCollection=z.KeyCollection||{};W=f.An=f.An||{};X=q.Settings=q.Settings||{};Y=f.Abbrev=f.Abbrev||{};Z=Y.Mailbox=Y.Mailbox||{};_0=Y.Fresh=Y.Fresh||{};_1=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};_2=d.Strings=d.Strings||{};_3=q.Docs=q.Docs||{};_4=_3.RunState=_3.RunState||{};_5=_3.NodeSet=_3.NodeSet||{};_6=f.Anims=f.Anims||{};_7=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};_8=U.T=U.T||{};_9=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_=d.Concurrency=d.Concurrency||{};$=f.AppendList=f.AppendList||{};ba=z.HashSetUtil=z.HashSetUtil||{};bb=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bc=f.Easing=f.Easing||{};bd=_.AsyncBody=_.AsyncBody||{};be=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bf=_.CT=_.CT||{};bg=Y.HashSet=Y.HashSet||{};bh=_.Scheduler=_.Scheduler||{};bi=d.CancellationTokenSource=d.CancellationTokenSource||{};bj=_3.DomNodes=_3.DomNodes||{};bk=d.Queue=d.Queue||{};bl=a.Error;bm=d.OperationCanceledException=d.OperationCanceledException||{};bn=d.Lazy=d.Lazy||{};bo=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bp=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bq=bp.LazyRecord=bp.LazyRecord||{};br=a.Hammer;bs=a.IntelliFactory;bt=bs&&bs.Runtime;bu=a.console;bv=a.jQuery;bw=a.Date;c.Main=function(){var bx,by,bz,bA,bB,bC,bD,bE,bF,bG;bx=l.Element("div",[m.Create("style","background : silver; height : 150px; text-align: center; font: 15px/150px Helvetica, Arial, sans-serif;")],[]);(new a.Hammer(bx.elt)).on("panleft panright tap press",function(bH){var bI;bx.Clear();bI=l.Element("div",[],[l.TextNode(bH.type+"gesture detected")]);bx.elt.appendChild(bI.elt);});by=l.Element("div",[m.Create("style","background : silver; height : 150px; text-align: center; font: 15px/150px Helvetica, Arial, sans-serif;")],[]);bz=new br.Manager(by.elt);bz.add(new br.Swipe((bA={},bA.direction=br.DIRECTION_ALL,bA)));bz.on("swipeleft swiperight swipeup swipedown panleft panright tap press",function(bH){var bI;by.Clear();bI=l.Element("div",[],[l.TextNode(bH.type+"gesture detected")]);by.elt.appendChild(bI.elt);});bB=l.Element("div",[m.Create("style","background : silver; height : 150px; text-align: center; font: 15px/150px Helvetica, Arial, sans-serif;")],[]);bC=new br.Manager(bB.elt);bC.add(new br.Tap((bD={},bD.event="doubletap",bD.taps=2,bD)));bC.add(new br.Tap((bE={},bE.event="singletap",bE)));bC.get("doubletap").recognizeWith("singletap");bC.get("singletap").requireFailure("doubletap");bC.add(new br.Pan((bF={},bF.direction=br.DIRECTION_ALL,bF)));bC.on("singletap doubletap panleft panright press",function(bH){var bI;bB.Clear();bI=l.Element("div",[],[l.TextNode(bH.type+"gesture detected")]);bB.elt.appendChild(bI.elt);});bG=l.Element("div",[],[l.Element("h2",[],[l.TextNode("Simple hammer class")]),bx,l.Element("h2",[],[l.TextNode("This one only detects swipe")]),by,l.Element("h2",[],[l.TextNode("Doubletap will not trigger singletap")]),bB]);r.LoadLocalTemplates("");l.RunById("main",bG);};e=d.Obj=bt.Class({Equals:function(bx){return this===bx;},GetHashCode:function(){return -1;}},null,e);e.New=bt.Ctor(function(){},e);h=g.attr=bt.Class({},e,h);i.FailWith=function(bx){throw new bl(bx);};i.KeyValue=function(bx){return[bx.K,bx.V];};l=f.Doc=bt.Class({},e,l);l.Element=function(bx,by,bz){var bA,bB;bA=m.Concat(by);bB=l.Concat(bz);return n.New(s.CreateElement(bx),bA,bB);};l.TextNode=function(bx){return l.Mk({$:5,$0:s.CreateText(bx)},w.Const());};l.RunById=function(bx,by){var bz;bz=s.Doc().getElementById(bx);B.Equals(bz,null)?i.FailWith("invalid id: "+bx):l.Run(bz,by);};l.Concat=function(bx){var by;by=C.ofSeqNonCopying(bx);return C.TreeReduce(l.get_Empty(),l.Append,by);};l.Mk=function(bx,by){return new l.New(bx,by);};l.Run=function(bx,by){M.LinkElement(bx,by.docNode);l.RunInPlace(false,bx,by);};l.Append=function(bx,by){return l.Mk({$:0,$0:bx.docNode,$1:by.docNode},w.Map2Unit(bx.updates,by.updates));};l.get_Empty=function(){return l.Mk(null,w.Const());};l.RunInPlace=function(bx,by,bz){var bA;bA=M.CreateRunState(by,bz.docNode);w.Sink(W.get_UseAnimations()||X.BatchUpdatesEnabled()?Z.StartProcessor(M.PerformAnimatedUpdate(bx,bA,bz.docNode)):function(){M.PerformSyncUpdate(bx,bA,bz.docNode);},bz.updates);};l.New=bt.Ctor(function(bx,by){e.New.call(this);this.docNode=bx;this.updates=by;},l);m=f.AttrProxy=bt.Class({},null,m);m.Create=function(bx,by){return t.Static(function(bz){s.SetAttr(bz,bx,by);});};m.Concat=function(bx){var by;by=C.ofSeqNonCopying(bx);return C.TreeReduce(t.EmptyAttr(),m.Append,by);};m.Append=function(bx,by){return t.AppendTree(bx,by);};n=f.Elt=bt.Class({Clear:function(){var bx;bx=this.docNode$1;bx!=null&&bx.$==1?bx.$0.Children=null:bx!=null&&bx.$==6?(bx.$0.Els=[],this.ClearHoles()):i.FailWith("Invalid docNode in Elt");this.rvUpdates.set_Value(w.Const());while(this.elt.hasChildNodes())this.elt.removeChild(this.elt.firstChild);},ClearHoles:function(){var bx;bx=this.docNode$1;bx!=null&&bx.$==6?bx.$0.Holes=[]:void 0;}},l,n);n.New=function(bx,by,bz){var bA,bB;bA=M.CreateElemNode(bx,by,bz.docNode);bB=v.Create(bz.updates);return new n.New$1({$:1,$0:bA},w.Map2Unit(t.Updates(bA.Attr),bB.v),bx,bB);};n.New$1=bt.Ctor(function(bx,by,bz,bA){l.New.call(this,bx,by);this.docNode$1=bx;this.updates$1=by;this.elt=bz;this.rvUpdates=bA;},n);p.NewFromSeq=function(bx){var by,bz,bA;by={};bz=U.Get(bx);try{while(bz.MoveNext()){bA=bz.Current();by[bA[0]]=bA[1];}}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}return by;};r.LoadLocalTemplates=function(bx){!r.LocalTemplatesLoaded()?(r.set_LocalTemplatesLoaded(true),r.LoadNestedTemplates(self.document.body,"")):void 0;r.LoadedTemplates().set_Item(bx,r.LoadedTemplateFile(""));};r.LocalTemplatesLoaded=function(){G.$cctor();return G.LocalTemplatesLoaded;};r.set_LocalTemplatesLoaded=function(bx){G.$cctor();G.LocalTemplatesLoaded=bx;};r.LoadNestedTemplates=function(bx,by){var bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;function bz(bO){var bP,bQ;if(!bA.ContainsKey(bO)){bP=(bQ=null,[bB.TryGetValue(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);bP[0]?(bN.Add(bO),bB.Remove(bO),r.PrepareTemplateStrict(by,{$:1,$0:bO},bP[1][0],{$:1,$0:bP[1][1]},{$:1,$0:bz})):bu.warn(bN.Contains(bO)?"Encountered loop when instantiating "+bO:"Local template does not exist: "+bO);}}bA=r.LoadedTemplateFile(by);bB=new A.New$5();bC=bx.querySelectorAll("[ws-template]");for(bD=0,bE=bC.length-1;bD<=bE;bD++){bF=bC[bD];bG=bF.getAttribute("ws-template").toLowerCase();bF.removeAttribute("ws-template");bB.set_Item(bG,[[bF],r.FakeRootSingle(bF)]);}bH=bx.querySelectorAll("[ws-children-template]");for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];bL=bK.getAttribute("ws-children-template").toLowerCase();bK.removeAttribute("ws-children-template");bB.set_Item(bL,(bM=s.ChildrenArray(bK),[bM,r.FakeRoot(bM)]));}bN=new I.New$3();while(bB.count>0)bz(J.head(bB.get_Keys()));};r.LoadedTemplates=function(){G.$cctor();return G.LoadedTemplates;};r.LoadedTemplateFile=function(bx){var by,bz,bA;by=(bz=null,[r.LoadedTemplates().TryGetValue(bx,{get:function(){return bz;},set:function(bB){bz=bB;}}),bz]);return by[0]?by[1]:(bA=new A.New$5(),(r.LoadedTemplates().set_Item(bx,bA),bA));};r.FakeRootSingle=function(bx){var by,bz,bA;bx.removeAttribute("ws-template");by=bx.getAttribute("ws-replace");by===null?void 0:(bx.removeAttribute("ws-replace"),bz=bx.parentNode,B.Equals(bz,null)?void 0:(bA=self.document.createElement(bx.tagName),bA.setAttribute("ws-replace",by),bz.replaceChild(bA,bx)));return r.FakeRoot([bx]);};r.FakeRoot=function(bx){var by,bz,bA;by=self.document.createElement("div");for(bz=0,bA=bx.length-1;bz<=bA;bz++)by.appendChild(H.get(bx,bz));return by;};r.PrepareTemplateStrict=function(bx,by,bz,bA,bB){var bC,bD;function bE(bJ,bK){var bL,bM,bN,bO,bP,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;function bQ(ca){}while(true)switch(bJ){case 0:if(bK!==null){bL=bK.nextSibling;if(B.Equals(bK.nodeType,x.TEXT_NODE))S.convertTextNode(bK);else if(B.Equals(bK.nodeType,x.ELEMENT_NODE))bG(bK);bK=bL;}else return null;break;case 1:bR=T.string(bK.nodeName,{$:1,$0:3},null).toLowerCase();bS=(bM=bR.indexOf("."),bM===-1?[bx,bR]:[T.string(bR,null,{$:1,$0:bM-1}),T.string(bR,{$:1,$0:bM+1},null)]);bT=bS[1];bU=bS[0];if(bU!==""&&!r.LoadedTemplates().ContainsKey(bU))return S.failNotLoaded(bT);else{if(bU===""&&bB!=null)bB.$0(bT);bV=r.LoadedTemplates().get_Item(bU);if(!bV.ContainsKey(bT))return S.failNotLoaded(bT);else{bW=bV.get_Item(bT);bX=bW.cloneNode(true);bY=new I.New$3();bZ=new A.New$5();b0=bK.attributes;for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=b0.item(b1).name.toLowerCase();bZ.set_Item(b3,(b4=b0.item(b1).nodeValue,b4===""?b3:b4.toLowerCase()));!bY.Add(b3)?bu.warn("Hole mapped twice",b3):void 0;}for(b5=0,b6=bK.childNodes.length-1;b5<=b6;b5++){b7=bK.childNodes[b5];B.Equals(b7.nodeType,x.ELEMENT_NODE)?!bY.Add(b7.nodeName.toLowerCase())?bu.warn("Hole filled twice",bT):void 0:void 0;}b8=bK.childNodes.length===1&&B.Equals(bK.firstChild.nodeType,x.TEXT_NODE);if(b8){bO=S.fillTextHole(bX,bK.firstChild.textContent,bT);((function(ca){return function(cb){if(cb!=null)ca(cb.$0);};}((bP=function(ca){return function(cb){return ca.Add(cb);};}(bY),function(ca){return bQ(bP(ca));})))(bO));}S.removeHolesExcept(bX,bY);if(!b8){for(b9=0,b_=bK.childNodes.length-1;b9<=b_;b9++){b$=bK.childNodes[b9];B.Equals(b$.nodeType,x.ELEMENT_NODE)?b$.hasAttributes()?S.fillInstanceAttrs(bX,b$):bF(bX,b$):void 0;}}S.mapHoles(bX,bZ);S.fill(bX,bK.parentNode,bK);bK.parentNode.removeChild(bK);return;}}break;}}function bF(bJ,bK){var bL,bN,bO;function bM(bP,bQ){var bR,bS,bT;if(bN==="title"&&bK.hasChildNodes()){bR=bv.parseHTML(bK.textContent);bK.removeChild(bK.firstChild);for(bS=0,bT=bR.length-1;bS<=bT;bS++)bK.appendChild(H.get(bR,bS));}else null;bG(bK);return S.fill(bK,bP,bQ);}bN=bK.nodeName.toLowerCase();s.IterSelector(bJ,"[ws-attr-holes]",function(bP){var bQ,bR,bS,bT,bU;bQ=_2.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=H.get(bQ,bR);bP.setAttribute(bT,(bU=new a.RegExp("\\${"+bN+"}","ig"),bP.getAttribute(bT).replace(bU,bK.textContent)));}});bO=bJ.querySelector("[ws-hole="+bN+"]");if(B.Equals(bO,null)){bL=bJ.querySelector("[ws-replace="+bN+"]");return B.Equals(bL,null)?null:(bM(bL.parentNode,bL),void bL.parentNode.removeChild(bL));}else{while(bO.hasChildNodes())bO.removeChild(bO.lastChild);bO.removeAttribute("ws-hole");return bM(bO,null);}}function bG(bJ){if(_2.StartsWith(bJ.nodeName.toLowerCase(),"ws-"))bI(bJ);else{S.convertAttrs(bJ);bH(bJ.firstChild);}}function bH(bJ){return bE(0,bJ);}function bI(bJ){return bE(1,bJ);}bC=bA==null?r.FakeRoot(bz):bA.$0;bD=(by==null?"":by.$0).toLowerCase();r.LoadedTemplateFile(bx).set_Item(bD,bC);H.length(bz)>0?(function(bJ){var bK,bL,bM,bN;while(true){bK=bJ.querySelector("[ws-template]");if(B.Equals(bK,null)){bL=bJ.querySelector("[ws-children-template]");if(B.Equals(bL,null))return null;else{bM=bL.getAttribute("ws-children-template");bL.removeAttribute("ws-children-template");r.PrepareTemplateStrict(bx,{$:1,$0:bM},s.ChildrenArray(bL),null,null);bJ=bJ;}}else{bN=bK.getAttribute("ws-template");(r.PrepareSingleTemplate(bx,{$:1,$0:bN},bK))(null);bJ=bJ;}}}(bC),bH(H.get(bz,0))):void 0;};r.PrepareSingleTemplate=function(bx,by,bz){var bA,bB,bC;bA=r.FakeRootSingle(bz);bB=[bz];bC={$:1,$0:bA};return function(bD){r.PrepareTemplateStrict(bx,by,bB,bC,bD);};};r.TextHoleRE=function(){G.$cctor();return G.TextHoleRE;};s.CreateElement=function(bx){return s.Doc().createElement(bx);};s.SetAttr=function(bx,by,bz){bx.setAttribute(by,bz);};s.CreateText=function(bx){return s.Doc().createTextNode(bx);};s.Doc=function(){L.$cctor();return L.Doc;};s.ChildrenArray=function(bx){var by,bz,bA;by=[];for(bz=0,bA=bx.childNodes.length-1;bz<=bA;bz++)by.push(bx.childNodes[bz]);return by;};s.IterSelector=function(bx,by,bz){var bA,bB,bC;bA=bx.querySelectorAll(by);for(bB=0,bC=bA.length-1;bB<=bC;bB++)bz(bA[bB]);};s.InsertAt=function(bx,by,bz){var bA;if(!(bz.parentNode===bx&&by===(bA=bz.nextSibling,B.Equals(bA,null)?null:bA)))bx.insertBefore(bz,by);};s.RemoveNode=function(bx,by){if(by.parentNode===bx)bx.removeChild(by);};t.Static=function(bx){return new m({$:3,$0:bx});};t.Updates=function(bx){return C.MapTreeReduce(function(by){return by.NChanged();},w.Const(),w.Map2Unit,bx.DynNodes);};t.AppendTree=function(bx,by){var bz;return bx===null?by:by===null?bx:(bz=new m({$:2,$0:bx,$1:by}),(t.SetFlags(bz,t.Flags(bx)|t.Flags(by)),bz));};t.EmptyAttr=function(){_1.$cctor();return _1.EmptyAttr;};t.Insert=function(bx,by){var bz,bA,bB;function bC(bD){if(!(bD===null))if(bD!=null&&bD.$==1)bz.push(bD.$0);else if(bD!=null&&bD.$==2){bC(bD.$0);bC(bD.$1);}else if(bD!=null&&bD.$==3)bD.$0(bx);else if(bD!=null&&bD.$==4)bA.push(bD.$0);}bz=[];bA=[];bC(by);bB=bz.slice(0);return E.New(bx,t.Flags(by),bB,bA.length===0?null:{$:1,$0:function(bD){J.iter(function(bE){bE(bD);},bA);}});};t.SetFlags=function(bx,by){bx.flags=by;};t.Flags=function(bx){return bx!==null&&bx.hasOwnProperty("flags")?bx.flags:0;};t.HasExitAnim=function(bx){var by;by=2;return(bx.DynFlags&by)===by;};t.GetExitAnim=function(bx){return t.GetAnim(bx,function(by,bz){return by.NGetExitAnim(bz);});};t.HasEnterAnim=function(bx){var by;by=1;return(bx.DynFlags&by)===by;};t.GetEnterAnim=function(bx){return t.GetAnim(bx,function(by,bz){return by.NGetEnterAnim(bz);});};t.HasChangeAnim=function(bx){var by;by=4;return(bx.DynFlags&by)===by;};t.GetChangeAnim=function(bx){return t.GetAnim(bx,function(by,bz){return by.NGetChangeAnim(bz);});};t.GetAnim=function(bx,by){return W.Concat(H.map(function(bz){return by(bz,bx.DynElem);},bx.DynNodes));};t.Sync=function(bx,by){H.iter(function(bz){bz.NSync(bx);},by.DynNodes);};u=f.DocElemNode=bt.Class({Equals:function(bx){return this.ElKey===bx.ElKey;},GetHashCode:function(){return this.ElKey;}},null,u);u.New=function(bx,by,bz,bA,bB,bC){var bD;return new u((bD={Attr:bx,Children:by,El:bA,ElKey:bB},(bt.SetOptional(bD,"Delimiters",bz),bt.SetOptional(bD,"Render",bC),bD)));};v=f.Updates=bt.Class({set_Value:function(bx){var by;by=this.s;!(by===null)?F.Obsolete(by):void 0;this.c=bx;}},null,v);v.Create=function(bx){var by;by=null;by=v.New(bx,null,function(){var bz;bz=by.s;return bz===null?(bz=F.Copy(by.c()),by.s=bz,F.WhenObsoleteRun(bz,function(){by.s=null;}),bz):bz;});return by;};v.New=function(bx,by,bz){return new v({c:bx,s:by,v:bz});};w.Const=function(bx){var by;by=F.New({$:0,$0:bx});return function(){return by;};};w.Map2Unit=function(bx,by){return w.CreateLazy(function(){return F.Map2Unit(bx(),by());});};w.Sink=function(bx,by){function bz(){F.WhenRun(by(),bx,function(){_.scheduler().Fork(bz);});}_.scheduler().Fork(bz);};w.CreateLazy=function(bx){var by;by={c:null,o:bx};return function(){var bz,bA;bz=by.c;return bz===null?(bz=by.o(),by.c=bz,(bA=bz.s,bA!=null&&bA.$==0)?by.o=null:F.WhenObsoleteRun(bz,function(){by.c=null;}),bz):bz;};};y.GetFieldValues=function(bx){var by,bz;by=[];for(var bA in bx)by.push(bx[bA]);return by;};A=z.Dictionary=bt.Class({set_Item:function(bx,by){this.set(bx,by);},ContainsKey:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz==null?false:H.exists(function(bA){return by.equals.apply(null,[(i.KeyValue(bA))[0],bx]);},bz);},TryGetValue:function(bx,by){var bz,bA,bB;bz=this;bA=this.data[this.hash(bx)];return bA==null?false:(bB=H.tryPick(function(bC){var bD;bD=i.KeyValue(bC);return bz.equals.apply(null,[bD[0],bx])?{$:1,$0:bD[1]}:null;},bA),bB!=null&&bB.$==1&&(by.set(bB.$0),true));},Remove:function(bx){return this.remove(bx);},get_Keys:function(){return new V.New(this);},set:function(bx,by){var bz,bA,bB,bC;bz=this;bA=this.hash(bx);bB=this.data[bA];bB==null?(this.count=this.count+1,this.data[bA]=new a.Array({K:bx,V:by})):(bC=H.tryFindIndex(function(bD){return bz.equals.apply(null,[(i.KeyValue(bD))[0],bx]);},bB),bC==null?(this.count=this.count+1,bB.push({K:bx,V:by})):bB[bC.$0]={K:bx,V:by});},remove:function(bx){var by,bz,bA,bB;by=this;bz=this.hash(bx);bA=this.data[bz];return bA==null?false:(bB=H.filter(function(bC){return!by.equals.apply(null,[(i.KeyValue(bC))[0],bx]);},bA),H.length(bB)<bA.length&&(this.count=this.count-1,this.data[bz]=bB,true));},get_Item:function(bx){return this.get(bx);},get:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz==null?R.notPresent():H.pick(function(bA){var bB;bB=i.KeyValue(bA);return by.equals.apply(null,[bB[0],bx])?{$:1,$0:bB[1]}:null;},bz);},GetEnumerator:function(){return U.Get0(this);},GetEnumerator0:function(){return U.Get0(H.concat(y.GetFieldValues(this.data)));}},e,A);A.New$5=bt.Ctor(function(){A.New$6.call(this,[],B.Equals,B.Hash);},A);A.New$6=bt.Ctor(function(bx,by,bz){var bA,bB;e.New.call(this);this.equals=by;this.hash=bz;this.count=0;this.data=[];bA=U.Get(bx);try{while(bA.MoveNext()){bB=bA.Current();this.set(bB.K,bB.V);}}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}},A);B.Equals=function(bx,by){var bz,bA,bB,bC;if(bx===by)return true;else{bz=typeof bx;if(bz=="object"){if(bx===null||bx===void 0||by===null||by===void 0)return false;else if("Equals"in bx)return bx.Equals(by);else if(bx instanceof a.Array&&by instanceof a.Array)return B.arrayEquals(bx,by);else if(bx instanceof a.Date&&by instanceof a.Date)return B.dateEquals(bx,by);else{bA=[true];for(var bD in bx)if(function(bE){bA[0]=!bx.hasOwnProperty(bE)||by.hasOwnProperty(bE)&&B.Equals(bx[bE],by[bE]);return!bA[0];}(bD))break;if(bA[0]){for(var bE in by)if(function(bF){bA[0]=!by.hasOwnProperty(bF)||bx.hasOwnProperty(bF);return!bA[0];}(bE))break;}return bA[0];}}else return bz=="function"&&("$Func"in bx?bx.$Func===by.$Func&&bx.$Target===by.$Target:"$Invokes"in bx&&"$Invokes"in by&&B.arrayEquals(bx.$Invokes,by.$Invokes));}};B.arrayEquals=function(bx,by){var bz,bA;if(H.length(bx)===H.length(by)){bz=true;bA=0;while(bz&&bA<H.length(bx)){!B.Equals(H.get(bx,bA),H.get(by,bA))?bz=false:void 0;bA=bA+1;}return bz;}else return false;};B.dateEquals=function(bx,by){return bx.getTime()===by.getTime();};B.Hash=function(bx){var by;by=typeof bx;return by=="function"?0:by=="boolean"?bx?1:0:by=="number"?bx:by=="string"?B.hashString(bx):by=="object"?bx==null?0:bx instanceof a.Array?B.hashArray(bx):B.hashObject(bx):0;};B.hashString=function(bx){var by,bz,bA;if(bx===null)return 0;else{by=5381;for(bz=0,bA=bx.length-1;bz<=bA;bz++)by=B.hashMix(by,bx[bz].charCodeAt());return by;}};B.hashArray=function(bx){var by,bz,bA;by=-34948909;for(bz=0,bA=H.length(bx)-1;bz<=bA;bz++)by=B.hashMix(by,B.Hash(H.get(bx,bz)));return by;};B.hashObject=function(bx){var by,bz;if("GetHashCode"in bx)return bx.GetHashCode();else{by=[0];for(var bA in bx)if(function(bB){by[0]=B.hashMix(B.hashMix(by[0],B.hashString(bB)),B.Hash(bx[bB]));return false;}(bA))break;return by[0];}};B.hashMix=function(bx,by){return(bx<<5)+bx+by;};B.Compare=function(bx,by){var bz,bA,bB,bC,bD,bE;if(bx===by)return 0;else{bA=typeof bx;switch(bA=="function"?1:bA=="boolean"?2:bA=="number"?2:bA=="string"?2:bA=="object"?3:0){case 0:return typeof by=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bx<by?-1:1;case 3:if(bx===null)bB=-1;else if(by===null)bB=1;else if("CompareTo"in bx)bB=bx.CompareTo(by);else if("CompareTo0"in bx)bB=bx.CompareTo0(by);else if(bx instanceof a.Array&&by instanceof a.Array)bB=B.compareArrays(bx,by);else if(bx instanceof a.Date&&by instanceof a.Date)bB=B.compareDates(bx,by);else{bC=[0];for(var bF in bx)if(function(bG){return!bx.hasOwnProperty(bG)?false:!by.hasOwnProperty(bG)?(bC[0]=1,true):(bC[0]=B.Compare(bx[bG],by[bG]),bC[0]!==0);}(bF))break;if(bC[0]===0){for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bx.hasOwnProperty(bH)&&(bC[0]=-1,true);}(bG))break;}bB=bC[0];}return bB;}}};B.compareArrays=function(bx,by){var bz,bA;if(H.length(bx)<H.length(by))return -1;else if(H.length(bx)>H.length(by))return 1;else{bz=0;bA=0;while(bz===0&&bA<H.length(bx)){bz=B.Compare(H.get(bx,bA),H.get(by,bA));bA=bA+1;}return bz;}};B.compareDates=function(bx,by){return B.Compare(bx.getTime(),by.getTime());};w=f.View=bt.Class({},null,w);C.ofSeqNonCopying=function(bx){var by,bz;if(bx instanceof a.Array)return bx;else if(bx instanceof P)return H.ofList(bx);else if(bx===null)return[];else{by=[];bz=U.Get(bx);try{while(bz.MoveNext())by.push(bz.Current());return by;}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}}};C.TreeReduce=function(bx,by,bz){var bA;function bB(bC,bD){var bE,bF;return bD<=0?bx:bD===1&&(bC>=0&&bC<bA)?H.get(bz,bC):(bF=bD/2>>0,by(bB(bC,bF),bB(bC+bF,bD-bF)));}bA=H.length(bz);return bB(0,bA);};C.MapTreeReduce=function(bx,by,bz,bA){var bB;function bC(bD,bE){var bF,bG;return bE<=0?by:bE===1&&(bD>=0&&bD<bB)?bx(H.get(bA,bD)):(bG=bE/2>>0,bz(bC(bD,bG),bC(bD+bG,bE-bG)));}bB=H.length(bA);return bC(0,bB);};E.New=function(bx,by,bz,bA){var bB;bB={DynElem:bx,DynFlags:by,DynNodes:bz};bt.SetOptional(bB,"OnAfterRender",bA);return bB;};F.Copy=function(bx){var by,bz,bA;by=bx.s;return by==null?bx:by!=null&&by.$==2?(bz=F.New({$:2,$0:by.$0,$1:[]}),(F.WhenObsolete(bx,bz),bz)):by!=null&&by.$==3?(bA=F.New({$:3,$0:[],$1:[]}),(F.When(bx,function(bB){F.MarkDone(bA,bx,bB);},bA),bA)):bx;};F.WhenObsoleteRun=function(bx,by){var bz;bz=bx.s;bz==null?by():bz!=null&&bz.$==2?bz.$1.push(by):bz!=null&&bz.$==3?bz.$1.push(by):void 0;};F.Map2Unit=function(bx,by){var bz,bA,bB;function bC(){var bD,bE,bF;if(!(bD=bB.s,bD!=null&&bD.$==0||bD!=null&&bD.$==2)){bE=F.ValueAndForever(bx);bF=F.ValueAndForever(by);bE!=null&&bE.$==1?bF!=null&&bF.$==1?bE.$0[1]&&bF.$0[1]?F.MarkForever(bB,null):F.MarkReady(bB,null):void 0:void 0;}}bz=bx.s;bA=by.s;return bz!=null&&bz.$==0?bA!=null&&bA.$==0?F.New({$:0,$0:null}):by:bA!=null&&bA.$==0?bx:(bB=F.New({$:3,$0:[],$1:[]}),(F.When(bx,bC,bB),F.When(by,bC,bB),bB));};F.WhenRun=function(bx,by,bz){var bA;bA=bx.s;bA==null?bz():bA!=null&&bA.$==2?(bA.$1.push(bz),by(bA.$0)):bA!=null&&bA.$==3?(bA.$0.push(by),bA.$1.push(bz)):by(bA.$0);};F.WhenObsolete=function(bx,by){var bz;bz=bx.s;bz==null?F.Obsolete(by):bz!=null&&bz.$==2?F.EnqueueSafe(bz.$1,by):bz!=null&&bz.$==3?F.EnqueueSafe(bz.$1,by):void 0;};F.When=function(bx,by,bz){var bA;bA=bx.s;bA==null?F.Obsolete(bz):bA!=null&&bA.$==2?(F.EnqueueSafe(bA.$1,bz),by(bA.$0)):bA!=null&&bA.$==3?(bA.$0.push(by),F.EnqueueSafe(bA.$1,bz)):by(bA.$0);};F.MarkDone=function(bx,by,bz){var bA;if(bA=by.s,bA!=null&&bA.$==0)F.MarkForever(bx,bz);else F.MarkReady(bx,bz);};F.ValueAndForever=function(bx){var by;by=bx.s;return by!=null&&by.$==0?{$:1,$0:[by.$0,true]}:by!=null&&by.$==2?{$:1,$0:[by.$0,false]}:null;};F.MarkForever=function(bx,by){var bz,bA,bB,bC;bz=bx.s;if(bz!=null&&bz.$==3){bx.s={$:0,$0:by};bA=bz.$0;for(bB=0,bC=H.length(bA)-1;bB<=bC;bB++)(H.get(bA,bB))(by);}else void 0;};F.MarkReady=function(bx,by){var bz,bA,bB,bC;bz=bx.s;if(bz!=null&&bz.$==3){bx.s={$:2,$0:by,$1:bz.$1};bA=bz.$0;for(bB=0,bC=H.length(bA)-1;bB<=bC;bB++)(H.get(bA,bB))(by);}else void 0;};F.EnqueueSafe=function(bx,by){var bz,bA,bB,bC;bx.push(by);if(bx.length%20===0){bz=bx.slice(0);bk.Clear(bx);for(bA=0,bB=H.length(bz)-1;bA<=bB;bA++){bC=H.get(bz,bA);typeof bC=="object"?function(bD){if(bD.s)bx.push(bD);}(bC):function(bD){bx.push(bD);}(bC);}}else void 0;};G.$cctor=function(){G.$cctor=a.ignore;G.LoadedTemplates=new A.New$5();G.LocalTemplatesLoaded=false;G.TextHoleRE="\\${([^}]+)}";};H.get=function(bx,by){H.checkBounds(bx,by);return bx[by];};H.length=function(bx){return bx.dims===2?bx.length*bx.length:bx.length;};H.checkBounds=function(bx,by){if(by<0||by>=bx.length)i.FailWith("Index was outside the bounds of the array.");};H.set=function(bx,by,bz){H.checkBounds(bx,by);bx[by]=bz;};I=z.HashSet=bt.Class({Add:function(bx){return this.add(bx);},Contains:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrContains(bx,by);},add:function(bx){var by,bz;by=this.hash(bx);bz=this.data[by];return bz==null?(this.data[by]=[bx],this.count=this.count+1,true):this.arrContains(bx,bz)?false:(bz.push(bx),this.count=this.count+1,true);},arrContains:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx]))bz=false;else bA=bA+1;return!bz;},ExceptWith:function(bx){var by;by=U.Get(bx);try{while(by.MoveNext())this.Remove(by.Current());}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bx){var by,bz,bA,bB;by=0;bz=ba.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++)H.set(bx,bA,bz[bA]);},IntersectWith:function(bx){var by,bz,bA,bB,bC;by=new I.New$4(bx,this.equals,this.hash);bz=ba.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++){bC=bz[bA];!by.Contains(bC)?this.Remove(bC):void 0;}},Remove:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrRemove(bx,by)&&(this.count=this.count-1,true);},arrRemove:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx])){by.splice.apply(by,[bA,1]);bz=false;}else bA=bA+1;return!bz;},GetEnumerator:function(){return U.Get(ba.concat(this.data));},GetEnumerator0:function(){return U.Get(ba.concat(this.data));}},e,I);I.New$3=bt.Ctor(function(){I.New$4.call(this,[],B.Equals,B.Hash);},I);I.New$4=bt.Ctor(function(bx,by,bz){var bA;e.New.call(this);this.equals=by;this.hash=bz;this.data=[];this.count=0;bA=U.Get(bx);try{while(bA.MoveNext())this.add(bA.Current());}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}},I);I.New$2=bt.Ctor(function(bx){I.New$4.call(this,bx,B.Equals,B.Hash);},I);J.head=function(bx){var by;by=U.Get(bx);try{return by.MoveNext()?by.Current():J.insufficient();}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}};J.fold=function(bx,by,bz){var bA,bB;bA=by;bB=U.Get(bz);try{while(bB.MoveNext())bA=bx(bA,bB.Current());return bA;}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};J.iter=function(bx,by){var bz;bz=U.Get(by);try{while(bz.MoveNext())bx(bz.Current());}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}};J.map=function(bx,by){return{GetEnumerator:function(){var bz;bz=U.Get(by);return new _8.New(null,null,function(bA){return bz.MoveNext()&&(bA.c=bx(bz.Current()),true);},function(){bz.Dispose();});}};};J.max=function(bx){var by,bz,bA;by=U.Get(bx);try{if(!by.MoveNext())J.seqEmpty();bz=by.Current();while(by.MoveNext()){bA=by.Current();B.Compare(bA,bz)===1?bz=bA:void 0;}return bz;}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}};J.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};L.$cctor=function(){L.$cctor=a.ignore;L.Doc=self.document;};M.LinkElement=function(bx,by){M.InsertDoc(bx,by,null);};M.CreateElemNode=function(bx,by,bz){var bA;M.LinkElement(bx,bz);bA=t.Insert(bx,by);return u.New(bA,bz,null,bx,_0.Int(),bt.GetOptional(bA.OnAfterRender));};M.InsertDoc=function(bx,by,bz){var bA;return by!=null&&by.$==1?M.InsertNode(bx,by.$0.El,bz):by!=null&&by.$==2?(bA=by.$0,(bA.Dirty=false,M.InsertDoc(bx,bA.Current,bz))):by==null?bz:by!=null&&by.$==4?M.InsertNode(bx,by.$0.Text,bz):by!=null&&by.$==5?M.InsertNode(bx,by.$0,bz):by!=null&&by.$==6?H.foldBack(function(bB,bC){return bB==null||bB.constructor===Q?M.InsertDoc(bx,bB,bC):M.InsertNode(bx,bB,bC);},by.$0.Els,bz):M.InsertDoc(bx,by.$0,M.InsertDoc(bx,by.$1,bz));};M.CreateRunState=function(bx,by){return _4.New(_5.get_Empty(),M.CreateElemNode(bx,t.EmptyAttr(),by));};M.PerformAnimatedUpdate=function(bx,by,bz){var bA;return W.get_UseAnimations()?(bA=null,_.Delay(function(){var bB,bC,bD;bB=_5.FindAll(bz);bC=M.ComputeChangeAnim(by,bB);bD=M.ComputeEnterAnim(by,bB);return _.Bind(W.Play(W.Append(bC,M.ComputeExitAnim(by,bB))),function(){return _.Bind(M.SyncElemNodesNextFrame(bx,by),function(){return _.Bind(W.Play(bD),function(){by.PreviousNodes=bB;return _.Return(null);});});});})):M.SyncElemNodesNextFrame(bx,by);};M.PerformSyncUpdate=function(bx,by,bz){var bA;bA=_5.FindAll(bz);M.SyncElemNode(bx,by.Top);by.PreviousNodes=bA;};M.InsertNode=function(bx,by,bz){s.InsertAt(bx,bz,by);return by;};M.SyncElemNodesNextFrame=function(bx,by){function bz(bA){a.requestAnimationFrame(function(){M.SyncElemNode(bx,by.Top);bA();});}return X.BatchUpdatesEnabled()?_.FromContinuations(function(bA,bB,bC){return bz.apply(null,[bA,bB,bC]);}):(M.SyncElemNode(bx,by.Top),_.Return(null));};M.ComputeExitAnim=function(bx,by){return W.Concat(H.map(function(bz){return t.GetExitAnim(bz.Attr);},_5.ToArray(_5.Except(by,_5.Filter(function(bz){return t.HasExitAnim(bz.Attr);},bx.PreviousNodes)))));};M.ComputeEnterAnim=function(bx,by){return W.Concat(H.map(function(bz){return t.GetEnterAnim(bz.Attr);},_5.ToArray(_5.Except(bx.PreviousNodes,_5.Filter(function(bz){return t.HasEnterAnim(bz.Attr);},by)))));};M.ComputeChangeAnim=function(bx,by){var bz;function bA(bB){return t.HasChangeAnim(bB.Attr);}bz=function(bB){return _5.Filter(bA,bB);};return W.Concat(H.map(function(bB){return t.GetChangeAnim(bB.Attr);},_5.ToArray(_5.Intersect(bz(bx.PreviousNodes),bz(by)))));};M.SyncElemNode=function(bx,by){!bx?M.SyncElement(by):void 0;M.Sync(by.Children);M.AfterRender(by);};M.SyncElement=function(bx){function by(bz){function bA(bB){var bC,bD;return bB!=null&&bB.$==0?bA(bB.$0)||bA(bB.$1):bB!=null&&bB.$==2?(bC=bB.$0,bC.Dirty||bA(bC.Current)):bB!=null&&bB.$==6&&(bD=bB.$0,bD.Dirty||H.exists(by,bD.Holes));}return bA(bz.Children);}t.Sync(bx.El,bx.Attr);by(bx)?M.DoSyncElement(bx):void 0;};M.Sync=function(bx){var by,bz;if(bx!=null&&bx.$==1)M.SyncElemNode(false,bx.$0);else if(bx!=null&&bx.$==2)M.Sync(bx.$0.Current);else if(bx==null);else if(bx!=null&&bx.$==5);else if(bx!=null&&bx.$==4){by=bx.$0;by.Dirty?(by.Text.nodeValue=by.Value,by.Dirty=false):void 0;}else if(bx!=null&&bx.$==6){bz=bx.$0;H.iter(function(bA){M.SyncElemNode(false,bA);},bz.Holes);H.iter(function(bA){t.Sync(bA[0],bA[1]);},bz.Attrs);M.AfterRender(bz);}else{M.Sync(bx.$0);M.Sync(bx.$1);}};M.AfterRender=function(bx){var by;by=bt.GetOptional(bx.Render);by!=null&&by.$==1?(by.$0(bx.El),bt.SetOptional(bx,"Render",null)):void 0;};M.DoSyncElement=function(bx){var by,bz,bA;function bB(bC,bD){var bE,bF;return bC!=null&&bC.$==1?bC.$0.El:bC!=null&&bC.$==2?(bE=bC.$0,bE.Dirty?(bE.Dirty=false,M.InsertDoc(by,bE.Current,bD)):bB(bE.Current,bD)):bC==null?bD:bC!=null&&bC.$==4?bC.$0.Text:bC!=null&&bC.$==5?bC.$0:bC!=null&&bC.$==6?(bF=bC.$0,(bF.Dirty?bF.Dirty=false:void 0,H.foldBack(function(bG,bH){return bG==null||bG.constructor===Q?bB(bG,bH):bG;},bF.Els,bD))):bB(bC.$0,bB(bC.$1,bD));}by=bx.El;bj.Iter((bz=bx.El,function(bC){s.RemoveNode(bz,bC);}),bj.Except(bj.DocChildren(bx),bj.Children(bx.El,bt.GetOptional(bx.Delimiters))));bB(bx.Children,(bA=bt.GetOptional(bx.Delimiters),bA!=null&&bA.$==1?bA.$0[1]:null));};P=O.T=bt.Class({GetEnumerator:function(){return new _8.New(this,null,function(bx){var by;by=bx.s;return by.$==0?false:(bx.c=by.$0,bx.s=by.$1,true);},void 0);},GetEnumerator0:function(){return U.Get(this);}},null,P);H.ofList=function(bx){var by,bz;bz=[];by=bx;while(!(by.$==0)){bz.push(O.head(by));by=O.tail(by);}return bz;};H.exists=function(bx,by){var bz,bA,bB,bC;bz=false;bA=0;bC=H.length(by);while(!bz&&bA<bC)if(bx(by[bA]))bz=true;else bA=bA+1;return bz;};H.tryPick=function(bx,by){var bz,bA,bB;bz=null;bA=0;while(bA<by.length&&bz==null){bB=bx(by[bA]);bB!=null&&bB.$==1?bz=bB:void 0;bA=bA+1;}return bz;};H.tryFindIndex=function(bx,by){var bz,bA;bz=null;bA=0;while(bA<by.length&&bz==null){bx(by[bA])?bz={$:1,$0:bA}:void 0;bA=bA+1;}return bz;};H.filter=function(bx,by){var bz,bA,bB;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++)if(bx(by[bA]))bz.push(by[bA]);return bz;};H.map=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bx(by[bA]);return bz;};H.iter=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)bx(by[bz]);};H.foldBack=function(bx,by,bz){var bA,bB,bC,bD,bE;bA=bz;bC=by.length;for(bD=1,bE=bC;bD<=bE;bD++)bA=bx(by[bC-bD],bA);return bA;};H.pick=function(bx,by){var bz;bz=H.tryPick(bx,by);return bz==null?i.FailWith("KeyNotFoundException"):bz.$0;};H.concat=function(bx){return a.Array.prototype.concat.apply([],H.ofSeq(bx));};H.ofSeq=function(bx){var by,bz;if(bx instanceof a.Array)return bx.slice();else if(bx instanceof P)return H.ofList(bx);else{by=[];bz=U.Get(bx);try{while(bz.MoveNext())by.push(bz.Current());return by;}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}}};H.choose=function(bx,by){var bz,bA,bB,bC;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++){bC=bx(by[bA]);bC==null?void 0:bz.push(bC.$0);}return bz;};H.create=function(bx,by){var bz,bA,bB;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by;return bz;};H.init=function(bx,by){var bz,bA,bB;bx<0?i.FailWith("Negative size given."):null;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by(bA);return bz;};H.forall=function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=H.length(by);while(bz&&bA<bC)if(bx(by[bA]))bA=bA+1;else bz=false;return bz;};F.Obsolete=function(bx){var by,bz,bA,bB,bC;bz=bx.s;if(bz==null||(bz!=null&&bz.$==2?(by=bz.$1,false):bz!=null&&bz.$==3?(by=bz.$1,false):true))void 0;else{bx.s=null;for(bA=0,bB=H.length(by)-1;bA<=bB;bA++){bC=H.get(by,bA);typeof bC=="object"?function(bD){F.Obsolete(bD);}(bC):bC();}}};F.New=function(bx){return{s:bx};};R.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};S.convertTextNode=function(bx){var by,bz,bA,bB,bC,bD;by=null;bz=0;bB=bx.textContent;bC=new a.RegExp(r.TextHoleRE(),"g");while(by=bC.exec(bB),by!==null){bx.parentNode.insertBefore(self.document.createTextNode(T.string(bB,{$:1,$0:bz},{$:1,$0:bC.lastIndex-H.get(by,0).length-1})),bx);bz=bC.lastIndex;bD=self.document.createElement("span");bD.setAttribute("ws-replace",H.get(by,1).toLowerCase());bx.parentNode.insertBefore(bD,bx);}bC.lastIndex=0;bx.textContent=T.string(bB,{$:1,$0:bz},null);};S.failNotLoaded=function(bx){bu.warn("Instantiating non-loaded template",bx);};S.fillTextHole=function(bx,by,bz){var bA;bA=bx.querySelector("[ws-replace]");return B.Equals(bA,null)?(bu.warn("Filling non-existent text hole",bz),null):(bA.parentNode.replaceChild(new a.Text(by),bA),{$:1,$0:bA.getAttribute("ws-replace")});};S.removeHolesExcept=function(bx,by){function bz(bA){s.IterSelector(bx,"["+bA+"]",function(bB){if(!by.Contains(bB.getAttribute(bA)))bB.removeAttribute(bA);});}bz("ws-attr");bz("ws-onafterrender");bz("ws-var");s.IterSelector(bx,"[ws-hole]",function(bA){if(!by.Contains(bA.getAttribute("ws-hole"))){bA.removeAttribute("ws-hole");while(bA.hasChildNodes())bA.removeChild(bA.lastChild);}});s.IterSelector(bx,"[ws-replace]",function(bA){if(!by.Contains(bA.getAttribute("ws-replace")))bA.parentNode.removeChild(bA);});s.IterSelector(bx,"[ws-on]",function(bA){bA.setAttribute("ws-on",_2.concat(" ",H.filter(function(bB){return by.Contains(H.get(_2.SplitChars(bB,[":"],1),1));},_2.SplitChars(bA.getAttribute("ws-on"),[" "],1))));});s.IterSelector(bx,"[ws-attr-holes]",function(bA){var bB,bC,bD,bE,bF;bB=_2.SplitChars(bA.getAttribute("ws-attr-holes"),[" "],1);for(bC=0,bD=bB.length-1;bC<=bD;bC++){bE=H.get(bB,bC);bA.setAttribute(bE,(bF=new a.RegExp(r.TextHoleRE(),"g"),bA.getAttribute(bE).replace(bF,function(bG,bH){return by.Contains(bH)?bG:"";})));}});};S.fillInstanceAttrs=function(bx,by){var bz,bA,bB,bC,bD;S.convertAttrs(by);bz=by.nodeName.toLowerCase();bA=bx.querySelector("[ws-attr="+bz+"]");if(B.Equals(bA,null))bu.warn("Filling non-existent attr hole",bz);else{bA.removeAttribute("ws-attr");for(bB=0,bC=by.attributes.length-1;bB<=bC;bB++){bD=by.attributes.item(bB);bD.name==="class"&&bA.hasAttribute("class")?bA.setAttribute("class",bA.getAttribute("class")+" "+bD.nodeValue):bA.setAttribute(bD.name,bD.nodeValue);}}};S.mapHoles=function(bx,by){function bz(bA){s.IterSelector(bx,"["+bA+"]",function(bB){var bC,bD;bC=(bD=null,[by.TryGetValue(bB.getAttribute(bA).toLowerCase(),{get:function(){return bD;},set:function(bE){bD=bE;}}),bD]);bC[0]?bB.setAttribute(bA,bC[1]):void 0;});}bz("ws-hole");bz("ws-replace");bz("ws-attr");bz("ws-onafterrender");bz("ws-var");s.IterSelector(bx,"[ws-on]",function(bA){bA.setAttribute("ws-on",_2.concat(" ",H.map(function(bB){var bC,bD,bE;bC=_2.SplitChars(bB,[":"],1);bD=(bE=null,[by.TryGetValue(H.get(bC,1),{get:function(){return bE;},set:function(bF){bE=bF;}}),bE]);return bD[0]?H.get(bC,0)+":"+bD[1]:bB;},_2.SplitChars(bA.getAttribute("ws-on"),[" "],1))));});s.IterSelector(bx,"[ws-attr-holes]",function(bA){var bB,bC,bD;bB=_2.SplitChars(bA.getAttribute("ws-attr-holes"),[" "],1);for(bC=0,bD=bB.length-1;bC<=bD;bC++)(function(){var bE;function bF(bG,bH){var bI;bI=i.KeyValue(bH);return bG.replace(new a.RegExp("\\${"+bI[0]+"}","ig"),"${"+bI[1]+"}");}bE=H.get(bB,bC);return bA.setAttribute(bE,(((bt.Curried3(J.fold))(bF))(bA.getAttribute(bE)))(by));}());});};S.fill=function(bx,by,bz){while(true)if(bx.hasChildNodes())bz=by.insertBefore(bx.lastChild,bz);else return null;};S.convertAttrs=function(bx){var bz,bA,bB,bC,bD,bE,bF,bG;function by(bH){var bI;bI=bx.getAttribute(bH);bI===null?void 0:bx.setAttribute(bH,bI.toLowerCase());}bz=bx.attributes;bA=[];bB=[];bC=[];for(bD=0,bE=bz.length-1;bD<=bE;bD++){bF=bz.item(bD);_2.StartsWith(bF.nodeName,"ws-on")&&bF.nodeName!=="ws-onafterrender"&&bF.nodeName!=="ws-on"?(bA.push(bF.nodeName),bB.push(T.string(bF.nodeName,{$:1,$0:"ws-on".length},null)+":"+bF.nodeValue.toLowerCase())):!_2.StartsWith(bF.nodeName,"ws-")&&(new a.RegExp(r.TextHoleRE())).test(bF.nodeValue)?(bF.nodeValue=(bG=new a.RegExp(r.TextHoleRE(),"g"),bF.nodeValue.replace(bG,function(bH,bI){return"${"+bI.toLowerCase()+"}";})),bC.push(bF.nodeName)):void 0;}!(bB.length==0)?bx.setAttribute("ws-on",_2.concat(" ",bB)):void 0;!(bC.length==0)?bx.setAttribute("ws-attr-holes",_2.concat(" ",bC)):void 0;by("ws-hole");by("ws-replace");by("ws-attr");by("ws-onafterrender");by("ws-var");H.iter(function(bH){bx.removeAttribute(bH);},bA);};T.string=function(bx,by,bz){return by==null?bz!=null&&bz.$==1?bx.slice(0,bz.$0+1):"":bz==null?bx.slice(by.$0):bx.slice(by.$0,bz.$0+1);};U.Get=function(bx){return bx instanceof a.Array?U.ArrayEnumerator(bx):B.Equals(typeof bx,"string")?U.StringEnumerator(bx):bx.GetEnumerator();};U.ArrayEnumerator=function(bx){return new _8.New(0,null,function(by){var bz;bz=by.s;return bz<H.length(bx)&&(by.c=H.get(bx,bz),by.s=bz+1,true);},void 0);};U.StringEnumerator=function(bx){return new _8.New(0,null,function(by){var bz;bz=by.s;return bz<bx.length&&(by.c=bx[bz],by.s=bz+1,true);},void 0);};U.Get0=function(bx){return bx instanceof a.Array?U.ArrayEnumerator(bx):B.Equals(typeof bx,"string")?U.StringEnumerator(bx):"GetEnumerator0"in bx?bx.GetEnumerator0():bx.GetEnumerator();};J.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};V=z.KeyCollection=bt.Class({GetEnumerator$1:function(){return U.Get(J.map(function(bx){return bx.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,V);V.New=bt.Ctor(function(bx){e.New.call(this);this.d=bx;},V);W.get_UseAnimations=function(){return _6.UseAnimations();};W.Play=function(bx){var by;by=null;return _.Delay(function(){return _.Bind(W.Run(a.ignore,_6.Actions(bx)),function(){_6.Finalize(bx);return _.Return(null);});});};W.Append=function(bx,by){return{$:0,$0:$.Append(bx.$0,by.$0)};};W.Run=function(bx,by){var bz;function bA(bB){function bC(bD,bE){var bF;bF=bE-bD;by.Compute(bF);bx();return bF<=bz?void a.requestAnimationFrame(function(bG){bC(bD,bG);}):bB();}a.requestAnimationFrame(function(bD){bC(bD,bD);});}bz=by.Duration;return bz===0?_.Zero():_.FromContinuations(function(bB,bC,bD){return bA.apply(null,[bB,bC,bD]);});};W.Concat=function(bx){return{$:0,$0:$.Concat(J.map(_6.List,bx))};};X.BatchUpdatesEnabled=function(){_7.$cctor();return _7.BatchUpdatesEnabled;};Z.StartProcessor=function(bx){var by;function bz(){var bA;bA=null;return _.Delay(function(){return _.Bind(bx,function(){var bB;bB=by[0];return bB===1?(by[0]=0,_.Zero()):bB===2?(by[0]=1,bz()):_.Zero();});});}by=[0];return function(){var bA;bA=by[0];bA===0?(by[0]=1,_.Start(bz(),null)):bA===1?by[0]=2:void 0;};};_0.Int=function(){_0.set_counter(_0.counter()+1);return _0.counter();};_0.set_counter=function(bx){bb.$cctor();bb.counter=bx;};_0.counter=function(){bb.$cctor();return bb.counter;};O.head=function(bx){return bx.$==1?bx.$0:O.listEmpty();};O.tail=function(bx){return bx.$==1?bx.$1:O.listEmpty();};O.listEmpty=function(){return i.FailWith("The input list was empty.");};_1.$cctor=function(){_1.$cctor=a.ignore;_1.EmptyAttr=null;};_2.concat=function(bx,by){return H.ofSeq(by).join(bx);};_2.SplitChars=function(bx,by,bz){return _2.Split(bx,new a.RegExp("["+_2.RegexEscape(by.join(""))+"]"),bz);};_2.StartsWith=function(bx,by){return bx.substring(0,by.length)==by;};_2.Split=function(bx,by,bz){return bz===1?H.filter(function(bA){return bA!=="";},_2.SplitWith(bx,by)):_2.SplitWith(bx,by);};_2.RegexEscape=function(bx){return bx.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_2.SplitWith=function(bx,by){return bx.split(by);};_4.New=function(bx,by){return{PreviousNodes:bx,Top:by};};_5.get_Empty=function(){return{$:0,$0:new I.New$3()};};_5.FindAll=function(bx){var by;function bz(bB){if(bB!=null&&bB.$==0){bz(bB.$0);bz(bB.$1);}else if(bB!=null&&bB.$==1)bA(bB.$0);else if(bB!=null&&bB.$==2)bz(bB.$0.Current);else if(bB!=null&&bB.$==6)H.iter(bA,bB.$0.Holes);}function bA(bB){by.push(bB);bz(bB.Children);}by=[];bz(bx);return{$:0,$0:new I.New$2(by)};};_5.Filter=function(bx,by){return{$:0,$0:bg.Filter(bx,by.$0)};};_5.Except=function(bx,by){return{$:0,$0:bg.Except(bx.$0,by.$0)};};_5.ToArray=function(bx){return bg.ToArray(bx.$0);};_5.Intersect=function(bx,by){return{$:0,$0:bg.Intersect(bx.$0,by.$0)};};_6.UseAnimations=function(){_9.$cctor();return _9.UseAnimations;};_6.Actions=function(bx){return _6.ConcatActions(H.choose(function(by){return by.$==1?{$:1,$0:by.$0}:null;},$.ToArray(bx.$0)));};_6.Finalize=function(bx){H.iter(function(by){if(by.$==0)by.$0();},$.ToArray(bx.$0));};_6.ConcatActions=function(bx){var by,bz,bA,bB;by=C.ofSeqNonCopying(bx);bz=H.length(by);return bz===0?_6.Const():bz===1?H.get(by,0):(bA=J.max(J.map(function(bC){return bC.Duration;},by)),(bB=H.map(function(bC){return _6.Prolong(bA,bC);},by),_6.Def(bA,function(bC){H.iter(function(bD){bD.Compute(bC);},bB);})));};_6.List=function(bx){return bx.$0;};_6.Const=function(bx){return _6.Def(0,function(){return bx;});};_6.Def=function(bx,by){return{Compute:by,Duration:bx};};_6.Prolong=function(bx,by){var bz,bA,bB;bz=by.Compute;bA=by.Duration;bB=bn.Create(function(){return by.Compute(by.Duration);});return{Compute:function(bC){return bC>=bA?bB.f():bz(bC);},Duration:bx};};_7.$cctor=function(){_7.$cctor=a.ignore;_7.BatchUpdatesEnabled=true;};_8=U.T=bt.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},e,_8);_8.New=bt.Ctor(function(bx,by,bz,bA){e.New.call(this);this.s=bx;this.c=by;this.n=bz;this.d=bA;},_8);_9.$cctor=function(){_9.$cctor=a.ignore;_9.CubicInOut=bc.Custom(function(bx){var by;by=bx*bx;return 3*by-2*(by*bx);});_9.UseAnimations=true;};_.Delay=function(bx){return function(by){try{(bx(null))(by);}catch(bz){by.k({$:1,$0:bz});}};};_.Bind=function(bx,by){return _.checkCancel(function(bz){bx(bd.New(function(bA){var bB;if(bA.$==0){bB=bA.$0;_.scheduler().Fork(function(){try{(by(bB))(bz);}catch(bC){bz.k({$:1,$0:bC});}});}else _.scheduler().Fork(function(){bz.k(bA);});},bz.ct));});};_.Zero=function(){be.$cctor();return be.Zero;};_.Start=function(bx,by){var bz,bA;bz=(bA=(_.defCTS())[0],by==null?bA:by.$0);_.scheduler().Fork(function(){if(!bz.c)bx(bd.New(function(bB){if(bB.$==1)_.UncaughtAsyncError(bB.$0);},bz));});};_.Return=function(bx){return function(by){by.k({$:0,$0:bx});};};_.checkCancel=function(bx){return function(by){if(by.ct.c)_.cancel(by);else bx(by);};};_.defCTS=function(){be.$cctor();return be.defCTS;};_.UncaughtAsyncError=function(bx){bu.log("WebSharper: Uncaught asynchronous exception",bx);};_.FromContinuations=function(bx){return function(by){var bz;function bA(bB){if(bz[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bz[0]=true;_.scheduler().Fork(bB);}}bz=[false];bx(function(bB){bA(function(){by.k({$:0,$0:bB});});},function(bB){bA(function(){by.k({$:1,$0:bB});});},function(bB){bA(function(){by.k({$:2,$0:bB});});});};};_.cancel=function(bx){bx.k({$:2,$0:new bm.New(bx.ct)});};_.scheduler=function(){be.$cctor();return be.scheduler;};$.Append=function(bx,by){return bx.$==0?by:by.$==0?bx:{$:2,$0:bx,$1:by};};$.ToArray=function(bx){var by;function bz(bA){if(bA.$==1)by.push(bA.$0);else if(bA.$==2){bz(bA.$0);bz(bA.$1);}else if(bA.$==3)H.iter(function(bB){by.push(bB);},bA.$0);}by=[];bz(bx);return by.slice(0);};$.Concat=function(bx){var by;by=C.ofSeqNonCopying(bx);return C.TreeReduce($.Empty(),$.Append,by);};$.Empty=function(){bo.$cctor();return bo.Empty;};ba.concat=function(bx){var by,bz;by=[];for(var bA in bx)by.push.apply(by,bx[bA]);return by;};bb.$cctor=function(){bb.$cctor=a.ignore;bb.counter=0;};bc=f.Easing=bt.Class({},e,bc);bc.Custom=function(bx){return new bc.New(bx);};bc.New=bt.Ctor(function(bx){e.New.call(this);this.transformTime=bx;},bc);bd.New=function(bx,by){return{k:bx,ct:by};};be.$cctor=function(){be.$cctor=a.ignore;be.noneCT=bf.New(false,[]);be.scheduler=new bh.New();be.defCTS=[new bi.New()];be.Zero=_.Return();be.GetCT=function(bx){bx.k({$:0,$0:bx.ct});};};bf.New=function(bx,by){return{c:bx,r:by};};bg.Filter=function(bx,by){return new I.New$2(H.filter(bx,bg.ToArray(by)));};bg.Except=function(bx,by){var bz;bz=new I.New$2(bg.ToArray(by));bz.ExceptWith(bg.ToArray(bx));return bz;};bg.ToArray=function(bx){var by;by=H.create(bx.get_Count(),void 0);bx.CopyTo(by);return by;};bg.Intersect=function(bx,by){var bz;bz=new I.New$2(bg.ToArray(bx));bz.IntersectWith(bg.ToArray(by));return bz;};bh=_.Scheduler=bt.Class({Fork:function(bx){var by;by=this;this.robin.push(bx);this.idle?(this.idle=false,a.setTimeout(function(){by.tick();},0)):void 0;},tick:function(){var bx,by,bz;by=this;bz=bw.now();bx=true;while(bx)if(this.robin.length===0){this.idle=true;bx=false;}else{(this.robin.shift())();bw.now()-bz>40?(a.setTimeout(function(){by.tick();},0),bx=false):void 0;}}},e,bh);bh.New=bt.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bh);bi=d.CancellationTokenSource=bt.Class({},e,bi);bi.New=bt.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bi);bj.Children=function(bx,by){var bz,bA,bB;if(by!=null&&by.$==1){bB=[];bz=by.$0[0].nextSibling;while(bz!==by.$0[1]){bB.push(bz);bz=bz.nextSibling;}return{$:0,$0:bB};}else return{$:0,$0:H.init(bx.childNodes.length,(bA=bx.childNodes,function(bC){return bA[bC];}))};};bj.Except=function(bx,by){var bz;bz=bx.$0;return{$:0,$0:H.filter(function(bA){return H.forall(function(bB){return!(bA===bB);},bz);},by.$0)};};bj.Iter=function(bx,by){H.iter(bx,by.$0);};bj.DocChildren=function(bx){var by;function bz(bA){if(bA!=null&&bA.$==2)bz(bA.$0.Current);else if(bA!=null&&bA.$==1)by.push(bA.$0.El);else if(bA==null);else if(bA!=null&&bA.$==5)by.push(bA.$0);else if(bA!=null&&bA.$==4)by.push(bA.$0.Text);else if(bA!=null&&bA.$==6)H.iter(function(bB){if(bB==null||bB.constructor===Q)bz(bB);else by.push(bB);},bA.$0.Els);else{bz(bA.$0);bz(bA.$1);}}by=[];bz(bx.Children);return{$:0,$0:C.ofSeqNonCopying(by)};};bk.Clear=function(bx){bx.splice(0,H.length(bx));};bm=d.OperationCanceledException=bt.Class({},bl,bm);bm.New=bt.Ctor(function(bx){bm.New$1.call(this,"The operation was canceled.",null,bx);},bm);bm.New$1=bt.Ctor(function(bx,by,bz){this.message=bx;this.inner=by;Q.setPrototypeOf(this,bm.prototype);this.ct=bz;},bm);bn.Create=function(bx){return bq.New(false,bx,bn.forceLazy);};bn.forceLazy=function(){var bx;bx=this.v();this.c=true;this.v=bx;this.f=bn.cachedLazy;return bx;};bn.cachedLazy=function(){return this.v;};bo.$cctor=function(){bo.$cctor=a.ignore;bo.Empty={$:0};};bq.New=function(bx,by,bz){return{c:bx,v:by,f:bz};};bt.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
